# Template Method: "دستور پخت را به من بده!"

### 🧠 داستان الگو:

فرض کن می‌خوای برای صبحونه یه دستورالعمل بنویسی که همه باید ازش پیروی کنن.
می‌گی:

- اول پاشو
- بعد دست و صورتو بشور
- بعد یه چیزی بخور
- بعد برو سر کارت

حالا یکی نیمرو می‌خوره، یکی نون و پنیر، یکی هم شاید بگه که صبحونه نمی‌خورم
ولی با این حال، روند کلی همه‌شون یکیه.

**این میشه Template Method Pattern.**
یعنی یه کلاس مامانی داریم که می‌گه الگوریتمت باید اینطوری باشه، ولی وسطش چندتا مرحله هست که بچه‌هات خودشون باید پرش کنن.

---

### 🔧 ساختارش چیه؟

یک کلاس پایه تعریف می‌کنی (معمولاً `abstract` یا `base`) که:

- یه متد اصلی داره (همون "template")
- توش یه سری قدم‌ها تعریف شده
- بعضی از قدم‌ها رو خودش انجام می‌ده
- بعضی‌ها رو می‌سپره به کلاس‌های فرزند که پیاده‌سازی کنن

---

### 🤖 مثال عملی:

فرض کن داریم صبحانه خوردن چند نفر رو شبیه‌سازی می‌کنیم:

```ts
// File: breakfast.ts

abstract class BreakfastRoutine {
  public prepare(): void {
    this.wakeUp();
    this.washFace();
    this.makeFood(); // <-- اینو می‌سپاریم به بچه‌ها
    this.eat();
  }

  protected wakeUp(): void {
    console.log("⏰ پاشو تنبل!");
  }

  protected washFace(): void {
    console.log("🚿 یه آب به سر و صورتت بزن...");
  }

  protected abstract makeFood(): void;

  protected eat(): void {
    console.log("😋 یالله بخور که کار داریم...");
  }
}

class ProgrammerRoutine extends BreakfastRoutine {
  protected makeFood(): void {
    console.log("☕ درست کردن قهوه و خوردن بیسکوییت مونده از دیشب");
  }
}

class AthleteRoutine extends BreakfastRoutine {
  protected makeFood(): void {
    console.log("🍳 املت پروتئینی با جو دو سر");
  }
}

// اجرا:
const p = new ProgrammerRoutine();
p.prepare();

console.log("\n---\n");

const a = new AthleteRoutine();
a.prepare();
```

---

### ✅ مزایاش چیه؟

- الگوریتم کلی رو می‌تونی کنترل کنی و مطمئن شی خراب نمی‌شه.
- کلاس‌های بچه می‌تونن فقط بخش‌هایی رو تغییر بدن که لازمه.
- کمکت می‌کنه از اصل DRY (Don't Repeat Yourself) پیروی کنی.
- ساختار کار رو منظم می‌کنه و خوانایی رو بالا می‌بره.

---

### 🕳️ کی بدرد نمی‌خوره؟

- وقتی تفاوت بین کلاس‌های فرزند خیلی زیاده و روند کلی بینشون مشترک نیست.
- وقتی کلاس پایه زیادی کنترلی بشه و بچه‌ها عملاً کاری نتونن بکنن!
- اگه تو روند کلی نیاز به انعطاف بیشتری باشه (که توی Strategy Pattern بهتره).

---

### 🧁 جمع‌بندی:

Template Method می‌گه:

> "تو فقط بگو نیمرو می‌خوای یا نون پنیر! ولی حق نداری بعد از غذا رفتن سر کار رو حذف کنی!"

یعنی ساختار کلی مهمه، ولی جزئیاتش دست خودته.
